{"remainingRequest":"C:\\Users\\atrist\\OneDrive\\github\\blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\atrist\\OneDrive\\github\\blog\\node_modules\\vuepress-plugin-demo-code\\src\\DemoAndCode.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\atrist\\OneDrive\\github\\blog\\node_modules\\vuepress-plugin-demo-code\\src\\DemoAndCode.vue","mtime":499162500000},{"path":"C:\\Users\\atrist\\OneDrive\\github\\blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\atrist\\OneDrive\\github\\blog\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\atrist\\OneDrive\\github\\blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\atrist\\OneDrive\\github\\blog\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBPbmxpbmVFZGl0IGZyb20gJy4vT25saW5lRWRpdC52dWUnCmltcG9ydCBnZXRIaWdobGlnaHRDb2RlSHRtbCBmcm9tICcuL2hpZ2hsaWdodCcKaW1wb3J0IHsKICAgIEpTX1JFLAogICAgQ1NTX1JFLAogICAgSFRNTF9SRSwKICAgIFBMQVRGT1JNUywKfSBmcm9tICcuL2NvbnN0YW50cycKaW1wb3J0IHsKICAgIHBhcnNlQW5kRGVjb2RlLAogICAgZ2V0TWF0Y2hlZFJlc3VsdCwKfSBmcm9tICcuL3V0aWxzJwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ0RlbW9BbmRDb2RlJywKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBPbmxpbmVFZGl0LAogICAgfSwKICAgIHByb3BzOiB7CiAgICAgICAgaHRtbFN0cjogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcnIH0sCiAgICAgICAgbGFuZ3VhZ2U6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAndnVlJyB9LAogICAgICAgIHNob3dUZXh0OiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJ3Nob3cgY29kZScgfSwKICAgICAgICBoaWRlVGV4dDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICdoaWRlIGNvZGUnIH0sCiAgICAgICAganNMaWJzU3RyOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJ1tdJyB9LAogICAgICAgIGNzc0xpYnNTdHI6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnW10nIH0sCiAgICAgICAgbWluSGVpZ2h0OiB7CiAgICAgICAgICAgIHR5cGU6IE51bWJlciwKICAgICAgICAgICAgZGVmYXVsdDogMjAwLAogICAgICAgICAgICB2YWxpZGF0b3I6IHZhbCA9PiB2YWwgPj0gMCwKICAgICAgICB9LAogICAgICAgIG9ubGluZUJ0bnNTdHI6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAne30nIH0sCiAgICAgICAgY29kZXNhbmRib3hTdHI6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAne30nIH0sCiAgICB9LAogICAgZGF0YSAoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgc2Nyb2xsVG9wOiAwLAogICAgICAgICAgICBwbGF0Zm9ybXM6IFBMQVRGT1JNUywKICAgICAgICAgICAgY29kZUhlaWdodDogOTk5OSwKICAgICAgICAgICAgbmF2YmFySGVpZ2h0OiAwLAoKICAgICAgICAgICAgaXNTaG93Q29kZTogdHJ1ZSwKICAgICAgICAgICAgaXNTaG93Q29udHJvbDogdHJ1ZSwKICAgICAgICB9CiAgICB9LAogICAgY29tcHV0ZWQ6IHsKICAgICAgICAvLyBidXR0b24gdGV4dAogICAgICAgIGNvbnRyb2xUZXh0OiAodm0pID0+IHZtLmlzU2hvd0NvZGUgPyB2bS5oaWRlVGV4dCA6IHZtLnNob3dUZXh0LAogICAgICAgIGhpZ2hsaWdodENvZGU6IHZtID0+IGdldEhpZ2hsaWdodENvZGVIdG1sKHZtLmRlY29kZWRIdG1sU3RyLCB2bS5sYW5ndWFnZSksCiAgICAgICAgZGVjb2RlZEh0bWxTdHI6IHZtID0+IGRlY29kZVVSSUNvbXBvbmVudCh2bS5odG1sU3RyKSwKICAgICAgICBzaG93T25saW5lQnRuczogdm0gPT4gcGFyc2VBbmREZWNvZGUodm0ub25saW5lQnRuc1N0ciksCiAgICAgICAgLy8gaWNvbiBhbmltYXRpb24KICAgICAgICBpY29uU3R5bGU6ICh2bSkgPT4gKHsKICAgICAgICAgICAgdHJhbnNmb3JtOiB2bS5pc1Nob3dDb2RlID8gJ3JvdGF0ZSgwKScgOiAncm90YXRlKC0xODBkZWcpJywKICAgICAgICB9KSwKICAgICAgICAvLyBhbmltYXRpb24KICAgICAgICBjb2RlV3JhcHBlclN0eWxlOiAodm0pID0+ICh7CiAgICAgICAgICAgICdtYXgtaGVpZ2h0Jzogdm0uaXNTaG93Q29kZSA/IGAke3ZtLmNvZGVIZWlnaHR9cHhgIDogYCR7dm0ubWluSGVpZ2h0fXB4YCwKICAgICAgICB9KSwKICAgICAgICAvLyBzdGlja3kKICAgICAgICBjb2RlQ29udHJvbFN0eWxlOiAodm0pID0+ICh7CiAgICAgICAgICAgIHRvcDogdm0uaXNTaG93Q29kZSA/IGAke3ZtLm5hdmJhckhlaWdodH1weGAgOiAnMCcsCiAgICAgICAgICAgIGN1cnNvcjogdm0uaXNTaG93Q29udHJvbCA/ICdwb2ludGVyJyA6ICdhdXRvJywKICAgICAgICB9KSwKICAgICAgICBwYXJzZWRDb2RlOiAodm0pID0+IHsKICAgICAgICAgICAgY29uc3QganMgPSBnZXRNYXRjaGVkUmVzdWx0KEpTX1JFKSh2bS5kZWNvZGVkSHRtbFN0cikgfHwgJycKICAgICAgICAgICAgY29uc3QgY3NzID0gZ2V0TWF0Y2hlZFJlc3VsdChDU1NfUkUpKHZtLmRlY29kZWRIdG1sU3RyKSB8fCAnJwogICAgICAgICAgICBjb25zdCBodG1sID0gZ2V0TWF0Y2hlZFJlc3VsdChIVE1MX1JFKSh2bS5kZWNvZGVkSHRtbFN0cikgfHwgdm0uZGVjb2RlZEh0bWxTdHIKICAgICAgICAgICAgICAgIC5yZXBsYWNlKEpTX1JFLCAnJykKICAgICAgICAgICAgICAgIC5yZXBsYWNlKENTU19SRSwgJycpCiAgICAgICAgICAgICAgICAucmVwbGFjZShIVE1MX1JFLCAnJykKICAgICAgICAgICAgICAgIC50cmltKCkKCiAgICAgICAgICAgIGNvbnN0IGpzTGlicyA9IHBhcnNlQW5kRGVjb2RlKHZtLmpzTGlic1N0cikKICAgICAgICAgICAgY29uc3QgY3NzTGlicyA9IHBhcnNlQW5kRGVjb2RlKHZtLmNzc0xpYnNTdHIpCiAgICAgICAgICAgIGNvbnN0IGNvZGVzYW5kYm94T3B0aW9ucyA9IHBhcnNlQW5kRGVjb2RlKHZtLmNvZGVzYW5kYm94U3RyKQoKICAgICAgICAgICAgcmV0dXJuIHsganMsIGNzcywgaHRtbCwganNMaWJzLCBjc3NMaWJzLCBjb2Rlc2FuZGJveE9wdGlvbnMgfQogICAgICAgIH0sCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIG9uQ2xpY2tDb250cm9sICgpIHsKICAgICAgICAgICAgdGhpcy5pc1Nob3dDb2RlID0gIXRoaXMuaXNTaG93Q29kZQoKICAgICAgICAgICAgaWYgKCF0aGlzLmlzU2hvd0NvZGUpIHsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0RG9tUmVjdCgpCiAgICAgICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oeyB0b3A6IHRoaXMuc2Nyb2xsVG9wLCBiZWhhdmlvcjogJ3Ntb290aCcgfSkKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgZ2V0RG9tUmVjdCAoKSB7CiAgICAgICAgICAgIGNvbnN0IG5hdmJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlci5uYXZiYXInKQogICAgICAgICAgICBjb25zdCB7IGNvZGVXcmFwcGVyIH0gPSB0aGlzLiRyZWZzCgogICAgICAgICAgICBjb25zdCB7IHRvcDogY29kZVRvcCwgaGVpZ2h0OiBjb2RlSGVpZ2h0IH0gPSBjb2RlV3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKQogICAgICAgICAgICBjb25zdCB7IGhlaWdodDogbmF2YmFySGVpZ2h0IH0gPSBuYXZiYXIKICAgICAgICAgICAgICAgID8gbmF2YmFyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpCiAgICAgICAgICAgICAgICA6IHsgaGVpZ2h0OiAwIH0KCiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9wID0gd2luZG93LnNjcm9sbFkgKyBjb2RlVG9wIC0gbmF2YmFySGVpZ2h0IC0gMzUKICAgICAgICAgICAgdGhpcy5jb2RlSGVpZ2h0ID0gY29kZUhlaWdodAogICAgICAgICAgICB0aGlzLm5hdmJhckhlaWdodCA9IG5hdmJhckhlaWdodAogICAgICAgIH0sCiAgICB9LAoKICAgIG1vdW50ZWQgKCkgewogICAgICAgIHRoaXMuZ2V0RG9tUmVjdCgpCiAgICAgICAgdGhpcy5pc1Nob3dDb2RlID0gZmFsc2UKCiAgICAgICAgaWYgKHRoaXMuY29kZUhlaWdodCA8IHRoaXMubWluSGVpZ2h0KSB7CiAgICAgICAgICAgIHRoaXMuaXNTaG93Q29udHJvbCA9IGZhbHNlCiAgICAgICAgfQogICAgfSwKfQo="},{"version":3,"sources":["DemoAndCode.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"DemoAndCode.vue","sourceRoot":"node_modules/vuepress-plugin-demo-code/src","sourcesContent":["<template>\n    <section class=\"demo-and-code-wrapper\">\n        <slot name=\"demo\" />\n\n        <div\n            ref=\"codeControl\"\n            class=\"code-control\"\n            @click=\"onClickControl\"\n            :style=\"codeControlStyle\"\n        >\n            <span class=\"control-btn\" v-show=\"isShowControl\">\n                {{ controlText }}\n                <i class=\"arrow-icon\" :style=\"iconStyle\" />\n            </span>\n\n            <div class=\"online-wrapper\" @click.stop>\n                <OnlineEdit\n                    v-for=\"platform in platforms\"\n                    :key=\"platform\"\n                    v-show=\"showOnlineBtns[platform]\"\n                    v-bind=\"parsedCode\"\n                    :platform=\"platform\"\n                />\n            </div>\n        </div>\n\n        <div class=\"code-wrapper\" ref=\"codeWrapper\" :style=\"codeWrapperStyle\">\n            <div\n                v-html=\"highlightCode\"\n                :class=\"`language-${language} extra-class`\"\n            />\n        </div>\n    </section>\n</template>\n\n<script>\nimport OnlineEdit from './OnlineEdit.vue'\nimport getHighlightCodeHtml from './highlight'\nimport {\n    JS_RE,\n    CSS_RE,\n    HTML_RE,\n    PLATFORMS,\n} from './constants'\nimport {\n    parseAndDecode,\n    getMatchedResult,\n} from './utils'\n\nexport default {\n    name: 'DemoAndCode',\n    components: {\n        OnlineEdit,\n    },\n    props: {\n        htmlStr: { type: String, default: '' },\n        language: { type: String, default: 'vue' },\n        showText: { type: String, default: 'show code' },\n        hideText: { type: String, default: 'hide code' },\n        jsLibsStr: { type: String, default: '[]' },\n        cssLibsStr: { type: String, default: '[]' },\n        minHeight: {\n            type: Number,\n            default: 200,\n            validator: val => val >= 0,\n        },\n        onlineBtnsStr: { type: String, default: '{}' },\n        codesandboxStr: { type: String, default: '{}' },\n    },\n    data () {\n        return {\n            scrollTop: 0,\n            platforms: PLATFORMS,\n            codeHeight: 9999,\n            navbarHeight: 0,\n\n            isShowCode: true,\n            isShowControl: true,\n        }\n    },\n    computed: {\n        // button text\n        controlText: (vm) => vm.isShowCode ? vm.hideText : vm.showText,\n        highlightCode: vm => getHighlightCodeHtml(vm.decodedHtmlStr, vm.language),\n        decodedHtmlStr: vm => decodeURIComponent(vm.htmlStr),\n        showOnlineBtns: vm => parseAndDecode(vm.onlineBtnsStr),\n        // icon animation\n        iconStyle: (vm) => ({\n            transform: vm.isShowCode ? 'rotate(0)' : 'rotate(-180deg)',\n        }),\n        // animation\n        codeWrapperStyle: (vm) => ({\n            'max-height': vm.isShowCode ? `${vm.codeHeight}px` : `${vm.minHeight}px`,\n        }),\n        // sticky\n        codeControlStyle: (vm) => ({\n            top: vm.isShowCode ? `${vm.navbarHeight}px` : '0',\n            cursor: vm.isShowControl ? 'pointer' : 'auto',\n        }),\n        parsedCode: (vm) => {\n            const js = getMatchedResult(JS_RE)(vm.decodedHtmlStr) || ''\n            const css = getMatchedResult(CSS_RE)(vm.decodedHtmlStr) || ''\n            const html = getMatchedResult(HTML_RE)(vm.decodedHtmlStr) || vm.decodedHtmlStr\n                .replace(JS_RE, '')\n                .replace(CSS_RE, '')\n                .replace(HTML_RE, '')\n                .trim()\n\n            const jsLibs = parseAndDecode(vm.jsLibsStr)\n            const cssLibs = parseAndDecode(vm.cssLibsStr)\n            const codesandboxOptions = parseAndDecode(vm.codesandboxStr)\n\n            return { js, css, html, jsLibs, cssLibs, codesandboxOptions }\n        },\n    },\n    methods: {\n        onClickControl () {\n            this.isShowCode = !this.isShowCode\n\n            if (!this.isShowCode) {\n                this.getDomRect()\n                window.scrollTo({ top: this.scrollTop, behavior: 'smooth' })\n            }\n        },\n        getDomRect () {\n            const navbar = document.querySelector('header.navbar')\n            const { codeWrapper } = this.$refs\n\n            const { top: codeTop, height: codeHeight } = codeWrapper.getBoundingClientRect()\n            const { height: navbarHeight } = navbar\n                ? navbar.getBoundingClientRect()\n                : { height: 0 }\n\n            this.scrollTop = window.scrollY + codeTop - navbarHeight - 35\n            this.codeHeight = codeHeight\n            this.navbarHeight = navbarHeight\n        },\n    },\n\n    mounted () {\n        this.getDomRect()\n        this.isShowCode = false\n\n        if (this.codeHeight < this.minHeight) {\n            this.isShowControl = false\n        }\n    },\n}\n</script>\n\n<style lang=\"stylus\">\n\nhtml {\n    scroll-behavior: smooth;\n}\n\n.demo-and-code-wrapper {\n    padding: 20px 0;\n\n    // for vuepress-plugin-code-copy\n    .code-copy {\n        position: absolute;\n        top: 20px;\n        right: 0;\n\n        opacity: 1;\n\n        svg {\n            right: 10px;\n        }\n    }\n\n    .code-control {\n        position: sticky;\n        z-index: 9;\n\n        display: flex;\n        justify-content: space-between;\n\n        width: 100%;\n        height: 50px;\n        margin-bottom: -.85rem;\n\n        text-align: center;\n\n        background-color: #fff;\n\n        font-size: 20px;\n        line-height: 50px;\n\n        .control-btn {\n            display: flex;\n            flex: 1;\n            justify-content: center;\n        }\n\n        .arrow-icon {\n            display: inline-block;\n            align-self: center;\n\n            margin-left: 5px;\n\n            transition: transform .3s ease-in-out;\n\n            border-top: none;\n            border-right: 6px solid transparent;\n            border-bottom: 6px solid #2c3e50;\n            border-left: 6px solid transparent;\n        }\n    }\n\n    .code-wrapper {\n        overflow: hidden;\n\n        transition: max-height .6s ease-in-out;\n    }\n}\n\n@media (max-width: 419px) {\n    .demo-and-code-wrapper {\n        margin: 0 -1.5rem;\n\n        .code-wrapper {\n            overflow: auto;\n        }\n\n        div[class*=\"language-\"] {\n            margin: 0 !important;\n        }\n    }\n}\n</style>\n"]}]}